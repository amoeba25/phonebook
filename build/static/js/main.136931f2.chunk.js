(this.webpackJsonpunicafe=this.webpackJsonpunicafe||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(17),a=t.n(c),u=t(8),r=t(3),i=t(2),o=t(4),s=t.n(o),l=t(0),j=function(e){var n=e.onDelete;return Object(l.jsx)("button",{onClick:n,children:"delete"})},b=function(e){var n=e.id,t=e.name,c=e.phone;return Object(l.jsxs)("li",{children:[t,": ",c," ",Object(l.jsx)(j,{onDelete:function(){return function(e,n){var t="".concat("/api/persons","/").concat(e);window.confirm("Delete ".concat(n,"?")),s.a.delete(t)}(n,t)}})," "]})},d=function(e){var n=e.persons,t=e.filterQuery;if(""===t)return Object(l.jsx)("ul",{children:n.map((function(e){return Object(l.jsx)(b,{name:e.name,phone:e.phone,id:e.id},e.name)}))});var c=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(l.jsx)("ul",{children:c.map((function(e){return Object(l.jsx)(b,{name:e.name,phone:e.phone,id:e.id},e.id)}))})},f=function(e){var n=e.label,t=e.value,c=e.onChange;return Object(l.jsxs)("div",{children:[" ",n,": ",Object(l.jsx)("input",{value:t,onChange:c})]})},h="/api/persons",O={getAll:function(){return s.a.get(h)},create:function(e){return s.a.post(h,e)},update:function(e,n){return s.a.put("".concat(h,"/").concat(e),n)}},m=function(e){var n=e.message;return null===n?null:Object(l.jsx)("div",{className:"success",children:n})},p=(t(41),function(e){var n=e.message;return null===n?null:Object(l.jsx)("div",{className:"failure",children:n})}),x=function(e){var n=e.heading;return Object(l.jsx)("h2",{children:n})},v=function(){var e=Object(i.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],a=Object(i.useState)(""),o=Object(r.a)(a,2),s=o[0],j=o[1],b=Object(i.useState)(""),h=Object(r.a)(b,2),v=h[0],g=h[1],w=Object(i.useState)(""),C=Object(r.a)(w,2),S=C[0],k=C[1],y=Object(i.useState)(null),D=Object(r.a)(y,2),N=D[0],A=D[1],T=Object(i.useState)(null),E=Object(r.a)(T,2),J=E[0],L=E[1];Object(i.useEffect)((function(){O.getAll().then((function(e){c(e.data)}))}),[]);return Object(l.jsxs)("div",{children:[Object(l.jsx)(x,{heading:"Phonebook"}),Object(l.jsx)(m,{message:N}),Object(l.jsx)(p,{message:J}),Object(l.jsx)(f,{label:"filter",value:S,onChange:function(e){k(e.target.value)}})," ",Object(l.jsx)("br",{}),Object(l.jsx)(x,{heading:"Add a new"}),Object(l.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),t.some((function(e){return e.name===s}))){window.confirm("".concat(s," is already added to the phonebook, repalce the old number with the new number?"));var n=t.find((function(e){return e.name===s})),a=Object(u.a)(Object(u.a)({},n),{},{phone:v});O.update(n.id,a).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e.data}))),j(""),g(""),A("".concat(e.data.name," has been changed!")),setTimeout((function(){return A(null)}),5e3)})).catch((function(e){j(""),g(""),L("".concat(a.name," has been deleted!")),setTimeout((function(){return L(null)}),5e3)}))}else{var r={name:s,phone:v};O.create(r).then((function(e){c(t.concat(e.data)),j(""),g(""),A("".concat(e.data.name," has been added!")),setTimeout((function(){return A(null)}),5e3)}))}},children:[Object(l.jsx)(f,{label:"Name",value:s,onChange:function(e){j(e.target.value)}})," ",Object(l.jsx)("br",{}),Object(l.jsx)(f,{label:"Phone",value:v,onChange:function(e){g(e.target.value)}})," ",Object(l.jsx)("br",{}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]}),Object(l.jsx)(x,{heading:"Numbers"}),Object(l.jsx)(d,{persons:t,filterQuery:S})]})};a.a.render(Object(l.jsx)(v,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.136931f2.chunk.js.map